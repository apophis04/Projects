{"ast":null,"code":"import _regeneratorRuntime from\"D:/GitHub/MedAdvisor/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/GitHub/MedAdvisor/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/GitHub/MedAdvisor/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Admin.js\nimport React,{useState,useEffect}from'react';import{useAuth}from'../../AuthContext';import{getAllUsers,promoteUser}from'../../apiService';import Table from'react-bootstrap/Table';import Button from'react-bootstrap/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Admin=function Admin(){var _useAuth=useAuth(),user=_useAuth.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];useEffect(function(){fetchUsers();},[]);var fetchUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var usersData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getAllUsers();case 3:usersData=_context.sent;setUsers(usersData);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchUsers(){return _ref.apply(this,arguments);};}();var handlePromoteUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userId){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return promoteUser(userId);case 3:fetchUsers();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function handlePromoteUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Admin Page\"}),user.role==='admin'?/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"User ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.id}),/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:user.role!=='admin'&&/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:function onClick(){return handlePromoteUser(user.id);},children:\"Promote\"})})]},user.id);})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"You do not have permission to access this page.\"})]});};export default Admin;","map":{"version":3,"names":["React","useState","useEffect","useAuth","getAllUsers","promoteUser","Table","Button","jsx","_jsx","jsxs","_jsxs","Admin","_useAuth","user","_useState","_useState2","_slicedToArray","users","setUsers","fetchUsers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","usersData","wrap","_callee$","_context","prev","next","sent","t0","console","error","stop","apply","arguments","handlePromoteUser","_ref2","_callee2","userId","_callee2$","_context2","_x","className","children","role","striped","bordered","hover","map","id","username","email","variant","onClick"],"sources":["D:/GitHub/MedAdvisor/frontend/src/web/cmpts/Admin/AdminPage.js"],"sourcesContent":["// Admin.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAuth } from '../../AuthContext';\r\nimport { getAllUsers, promoteUser } from '../../apiService';\r\nimport Table from 'react-bootstrap/Table';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nconst Admin = () => {\r\n  const { user } = useAuth();\r\n  const [users, setUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const usersData = await getAllUsers();\r\n      setUsers(usersData);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  const handlePromoteUser = async (userId) => {\r\n    try {\r\n      await promoteUser(userId);\r\n      fetchUsers();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  \r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2 className=\"mb-4\">Admin Page</h2>\r\n      {user.role === 'admin' ? (\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th>User ID</th>\r\n              <th>Username</th>\r\n              <th>Email</th>\r\n              <th>Role</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users.map((user) => (\r\n              <tr key={user.id}>\r\n                <td>{user.id}</td>\r\n                <td>{user.username}</td>\r\n                <td>{user.email}</td>\r\n                <td>{user.role}</td>\r\n                <td>\r\n                  {user.role !== 'admin' && (\r\n                    <Button\r\n                      variant=\"success\"\r\n                      onClick={() => handlePromoteUser(user.id)}\r\n                    >\r\n                      Promote\r\n                    </Button>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n      ) : (\r\n        <p>You do not have permission to access this page.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}